<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: shaders/ShaderProgram.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: shaders/ShaderProgram.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>export class ShaderProgram {
    constructor (webGL) {
        this.webGL = webGL
        
        /**
         * Shader type
         */
        this.VERTEX_SHADER = 'vertex'

        /**
         * Shader type
         */
        this.FRAGMENT_SHADER = 'fragment'

        /*
         * Variable type
        */
        this.ATTRIBUTE = 'attribute'

        /*
         * Variable type
         */
        this.UNIFORM = 'uniform'

        return this
    }

    /**
     * Compiling and attaching shader to this program.
     * @param {String} type can be ['vertex', 'fragment'].
     * @param {String} source 
     */
    addShader (type, source) {
        let shader
        switch (type) {
            case 'vertex' || this.VERTEX_SHADER: 
                shader = this.webGL.createShader(this.webGL.VERTEX_SHADER)
                this.vertexShader = shader
            break;
            case 'fragment' || this.FRAGMENT_SHADER:
                shader = this.webGL.createShader(this.webGL.FRAGMENT_SHADER)
                this.fragmentShader = shader
            break;
            default:
                throw new BronzeShaderException('Wrong shader type')
            break;
        }
        this.webGL.shaderSource(shader, source)
        this.webGL.compileShader(shader)

        if (!this.webGL.getShaderParameter(shader, this.webGL.COMPILE_STATUS)) {
            console.error(this.webGL.getShaderInfoLog(shader))
            throw 'Could not compile shader:'  
        }
    }

    /**
     * @param {bool} [deleteShaders] will delete shader after attaching.
     */
    create (deleteShaders = false) {
        let program = this.webGL.createProgram()

        this.webGL.attachShader(program, this.vertexShader)
        this.webGL.attachShader(program, this.fragmentShader)

        this.webGL.linkProgram(program)
        this.webGL.useProgram(program)

        if (deleteShaders) {
            this.webGL.deleteShader(this.vertexShader);
            this.webGL.deleteShader(this.fragmentShader);
        }
        this.program = program
        return program
    }

    /**
     * Linking variable of program to this object.
     * @param {String} type can be ['attribute', 'uniform']
     * @param {String} name variable name in shader.
     * @param {String} [customName] variable name in this object. By default its {name}.
     */
    linkVariable (type, name, customName) {
        customName = customName || name
        if (this[customName] !== undefined) {
            console.warn('Shader program: Custom name for uniform was switched from ' +
            customName + ' to ' + customName + '1')
            customName = customName + '1'
        }
        switch (type) {
            case this.ATTRIBUTE:
                this[customName] = this.webGL.getAttribLocation(this.program, name)
            break;
            case this.UNIFORM:
                this[customName] = this.webGL.getUniformLocation(this.program, name)
            break;
            default: 
                throw 'Wrong variable type'
        }
        return this[customName]
    }

    /**
     * Linking attribute variable of program to this object.
     * @param {String} name variable name in shader.
     * @param {String} [customName] variable name in this object. By default its {name}.
     */
    linkAttribute(name, customName) {
        customName = customName || name
        if (this[customName] != undefined) {
            console.warn('Shader program: Custom name for uniform was switched from ' +
                customName + ' to ' + customName + '1')
            customName = customName + '1'
        }
        this[customName] = this.webGL.getAttribLocation(this.program, name)
        if (this[customName] == null) {
            throw new Error('Can not link uniform ' + name + '. The variable may not be used in shader.')
        }
        return this[customName]
    }

    /**
     * Linking uniform variable of program to this object.
     * @param {String} name variable name in shader.
     * @param {String} [customName] variable name in this object. By default its {name}.
     */
    linkUniform(name, customName) {
        customName = customName || name
        if (this[customName] != undefined) {
            console.warn('Shader program: Custom name for attribute was switched from ' +
                customName + ' to ' + customName + '1')
            customName = customName + ''
        }
        this[customName] = this.webGL.getUniformLocation(this.program, name)
        if (this[customName] == null) {
            throw new Error('Can not link uniform ' + name + '. The variable may not be used in shader.')
        }
        return this[customName]
    }

    use () {
        this.webGL.useProgram(this.program)
    }

    useIn (webGL) {
        webGL.useProgram(this.program)
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Math.html">Math</a></li><li><a href="module-Matrixes.html">Matrixes</a></li><li><a href="module-Vectors.html">Vectors</a></li></ul><h3>Classes</h3><ul><li><a href="Camera.html">Camera</a></li><li><a href="Controls.html">Controls</a></li><li><a href="Cube.html">Cube</a></li><li><a href="CubeD.html">CubeD</a></li><li><a href="CubeTexture.html">CubeTexture</a></li><li><a href="Debugger.html">Debugger</a></li><li><a href="Engine.html">Engine</a></li><li><a href="Glass.html">Glass</a></li><li><a href="Grid.html">Grid</a></li><li><a href="Material.html">Material</a></li><li><a href="module-Matrixes.Matrix.html">Matrix</a></li><li><a href="Object.html">Object</a></li><li><a href="Picture.html">Picture</a></li><li><a href="Polygon.html">Polygon</a></li><li><a href="Rect.html">Rect</a></li><li><a href="ReflectionTexture.html">ReflectionTexture</a></li><li><a href="SimpleTexture.html">SimpleTexture</a></li><li><a href="Sound_Sound.html">Sound</a></li><li><a href="UI.html">UI</a></li></ul><h3>Global</h3><ul><li><a href="global.html#compileShader">compileShader</a></li><li><a href="global.html#createWebGLProgram">createWebGLProgram</a></li><li><a href="global.html#getWebGL">getWebGL</a></li><li><a href="global.html#getWebGLById">getWebGLById</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue May 07 2019 02:37:28 GMT+0300 (Eastern European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
